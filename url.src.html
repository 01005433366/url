<!doctype html>
<html lang=en-US>
<meta charset=utf-8>
<title>URL Standard</title>
<link rel=stylesheet href=//www.whatwg.org/style/specification>
<link rel=icon href=//www.whatwg.org/images/icon>

<div class=head>

<p><a class=logo href=//www.whatwg.org/><img alt=WHATWG src=//www.whatwg.org/images/logo></a></p>
<h1>URL</h1>
<h2 class="no-num no-toc">Living Standard &mdash; Last Updated [DATE: 01 Jan 1901]</h2>

<dl>
 <dt>This Version:
 <dd><a href=//url.spec.whatwg.org/>http://url.spec.whatwg.org/</a>

 <dt>Participate:</dt>
 <dd>Send feedback to
  <a href="http://www.whatwg.org/mailing-list">whatwg@whatwg.org</a>
  (<a href="http://www.whatwg.org/mailing-list#specs">archives</a>) or
  <a href="https://www.w3.org/Bugs/Public/enter_bug.cgi?product=WHATWG&amp;component=URL">file a bug</a>
  (<a href="https://www.w3.org/Bugs/Public/buglist.cgi?product=WHATWG&amp;component=URL&amp;resolution=---">open bugs</a>)
 <dd><a href="http://wiki.whatwg.org/wiki/IRC">IRC: #whatwg on Freenode</a>

 <dt>Version History:
 <dd><a href=https://github.com/whatwg/url/commits>https://github.com/whatwg/url/commits</a>
 <dd><a href="https://twitter.com/urlstandard">@urlstandard</a>

 <dt>Editor:
 <dd class="h-card vcard"><a class="u-url url p-name fn" lang="nl" href="http://annevankesteren.nl/">Anne van Kesteren</a>
  &lt;<a class="u-email email " href="mailto:annevk@annevk.nl">annevk@annevk.nl</a>>
</dl>

<script src=//dvcs.w3.org/hg/quirks-mode/raw-file/tip/file-bug.js async></script>

<p class=copyright><a rel="license" href="http://creativecommons.org/publicdomain/zero/1.0/"><img src="http://i.creativecommons.org/p/zero/1.0/80x15.png" alt="CC0"></a>
To the extent possible under law, the editors have waived all copyright and
related or neighboring rights to this work. In addition, as of
[DATE: 01 Jan 1901], the editors have made this specification available
under the
<a rel="license"
href="http://www.openwebfoundation.org/legal/the-owf-1-0-agreements/owfa-1-0">Open Web Foundation Agreement Version 1.0</a>,
which is available at
http://www.openwebfoundation.org/legal/the-owf-1-0-agreements/owfa-1-0.

</div>



<h2 class="no-num no-toc">Table of Contents</h2>
<!--toc-->



<h2 class=no-num>Goals</h2>

<p>The URL standard sets out to make URLs throughout the web platform fully
predictable and interoperable. This is the plan:

<ul>
 <li><p>Align RFC 3986 and RFC 3987 with contemporary implementations and
 obsolete them in the process. (E.g. spaces, other "illegal" code points,
 query encoding, equality, canonicalization, are all concepts not entirely
 shared, or defined.) URL parsing needs to become as solid as HTML parsing.
 <span data-anolis-ref class=informative>RFC3986</span>
 <span data-anolis-ref class=informative>RFC3987</span>

 <li><p>Standardize on the term URL. URI and IRI are just confusing. In
 practice a single algorithm is used for both so keeping them distinct is
 not helping anyone. URL also easily wins the
 <a href="http://www.googlefight.com/index.php?word1=url&amp;word2=uri">search result popularity contest</a>.

 <li><p>Define URL's existing JavaScript API in full detail and add
 enhancements to make it easier to work with. Add a new <code>URL</code>
 object as well for URL manipulation without usage of HTML elements. (Useful
 for Web Workers.)
</ul>

<p class=note>As the editor learns more about the subject matter the goals
might increase in scope somewhat.



<h2>Conformance</h2>
<p>All diagrams, examples, and notes in this specification are
non-normative, as are all sections explicitly marked non-normative.
Everything else in this specification is normative.

<p>The key words "MUST", "MUST NOT", "REQUIRED", <!--"SHALL", "SHALL
NOT",--> "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and
"OPTIONAL" in the normative parts of this specification are to be
interpreted as described in RFC2119. For readability, these words do
not appear in all uppercase letters in this specification.
<span data-anolis-ref>RFC2119</span>



<h2>Terminology</h2>

<p>Some terms used in this specification are defined in the
Encoding Standard. <span data-anolis-ref>ENCODING</span>

<p>The <dfn>ASCII digits</dfn> are code points in the range U+0030 to U+0039.

<p>The <dfn>ASCII hex digits</dfn> are <span>ASCII digits</span> or are
code points in the range U+0041 to U+0046 or in the range U+0061 to U+0066.

<p>The <dfn>ASCII alpha</dfn> are code points in the range U+0041 to U+005A
or in the range U+0061 to U+007A.

<p>The <dfn>ASCII alphanumeric</dfn> are <span>ASCII digits</span> or
<span>ASCII alpha</span>.


<p>The <dfn>domain label separators</dfn> are the code points
U+002E, U+3002, U+FF0E, and U+FF61.
<!-- IDNA2003/UTS #46; IDNA2008 does not define these -->


<p>A <dfn>URL-encoded byte</dfn> is "<code title>%</code>", followed by two
<span>ASCII hex digits</span>.

<p class=note>For maximum robustness, sequences of
<span title="URL-encoded byte">URL-encoded bytes</span>, after conversion to
bytes, ought to not cause
<span data-anolis-spec=encoding>utf-8 decode</span> to emit one or more
<span data-anolis-spec=encoding title="decoder error">decoder errors</span>.

<p>To <dfn>URL encode</dfn> a <var title>byte</var> into a
<span>URL-encoded byte</span>, return a string consisting of
"<code title>%</code>", followed by a double-digit, uppercase, hexadecimal
representation of <var title>byte</var>.



<h2>Hosts and IP addresses</h2>

<p>A <dfn title=concept-host>host</dfn> is a string that represents a
network address, either in the form of a
<span title=concept-domain>domain</span> or an
<span title=concept-ipv6>IPv6 address</span>.

<p class=note>This is a slightly more generic definition of
<span title=concept-host>host</span> than its traditional meaning for the
sake of convenience.
<!-- "convenience's sake" as The Economist would write it is ugly -->

<p>A <dfn title=concept-domain>domain</dfn> is an ordered list of one or
more <dfn title=concept-domain-label>domain labels</dfn>.

<p class=XXX>An <dfn title=concept-ipv6>IPv6 address</dfn> is ...


<h3 id=host-writing>Writing</h3>

<p>A <span title=concept-domain>domain</span> must be one or more
<span title=concept-domain-label>domain labels</span> separated from each
other by a
<span title="domain label separators">domain label separator</span>,
optionally followed by a
<span title="domain label separators">domain label separator</span>.
<!-- if a domain has 4 labels, no trailing dot, and each label consists only
     of ASCII digits it's IPv4 because the last label of a domain cannot
     start with an ASCII digit -->

<p class=XXX>An <span title=concept-ipv6>IPv6 address</span> must ...


<h3 id=host-parsing>Parsing</h3>

<p class=XXX>IDNA2003 vs IDNA2008 (and also UTS #46)

<p>A <dfn title=concept-parsed-host>parsed host</dfn> consists either of a
<span title=concept-parsed-domain>parsed domain</span> or a
<span title=concept-parsed-ipv6>parsed IPv6 address</span>.

<p>A <dfn title=concept-parsed-domain>parsed domain</dfn> consists of a list
of <span title=concept-domain-label>labels</span> and a
<dfn>trailing dot flag</dfn>.

<p>A <dfn title=concept-parsed-ipv6>parsed IPv6 address</dfn> consists of an
ordered set of eight 16-bit integers.

<p classXXX>To <dfn title=concept-host-parser>parse</dfn> ...


<h3 id=host-serializing>Serializing</h3>

<p class=XXX>Normalize IPv6 addresses
<!-- Safari/Gecko/Opera do not do this. Chrome does. I would prefer aligning
     with Chrome as we normalize domains too. -->



<h2>URLs</h2>

<!-- History behind URL as term:
     http://lists.w3.org/Archives/Public/uri/2012Oct/0080.html -->

<p>A <dfn title=concept-url>URL</dfn> is a string that represents an
identifier.

<p>A <span title=concept-url>URL</span> is either a
<span title=concept-relative-url>relative URL</span> or an
<span title=concept-absolute-url>absolute URL</span>. Either form can be
followed by a <span title=concept-url-fragment>fragment</span>.

<p>A <dfn title=concept-relative-url>relative URL</dfn> is a
<span title=concept-url>URL</span> that is relative to a
<span title=concept-parsed-url>parsed URL</span> (named the base URL),
provided the<span title=concept-parsed-url>parsed URL</span> has a
<span>relative scheme</span> (otherwise
<span title=concept-url-parser>parsing</span> results in a fatal error).

<p>An <dfn title=concept-absolute-url>absolute URL</dfn> stands on its own
and can serve as base URL.

<p>Provided there are no fatal errors,
<span title=concept-url-parser>parsing</span> and
<span title=concept-url-serializer>serializing</span> a
<span title=concept-url>URL</span> will turn it into an
<span title=concept-absolute-url>absolute URL</span>. The intermediate form
is named a <dfn title=concept-parsed-url>parsed URL</dfn>. The components a
<span title=concept-url>URL</span> can consist of and
<span title=concept-parsed-url>parsed URL</span> consists of are
<dfn title=concept-url-scheme>scheme</dfn>,
<dfn title=concept-url-scheme-data>scheme data</dfn> (not used if
<span title=concept-url-scheme>scheme</span> is a <span>relative scheme</span>),
<dfn title=concept-url-userinfo>userinfo</dfn>,
<dfn title=concept-url-host>host</dfn>,
<dfn title=concept-url-port>port</dfn>,
<dfn title=concept-url-path>path</dfn>,
<dfn title=concept-url-query>query</dfn>, and
<dfn title=concept-url-fragment>fragment</dfn>.

<p>A <dfn>relative scheme</dfn> is a
<span title=concept-url-scheme>scheme</span> listed in the first column of
the following table. It typically has an associated default
<span title=concept-url-port>port</span> listed in the second column on the
same row.

<table>
 <tr><th><span title=concept-url-scheme>scheme</span>
     <th><span title=concept-url-port>port</span>
 <tr><td>"<code title>ftp</code>"<td>21
 <tr><td>"<code title>file</code>"<td>
 <tr><td>"<code title>gopher</code>"<td>70
 <tr><td>"<code title>http</code>"<td>80
 <tr><td>"<code title>https</code>"<td>443
 <tr><td>"<code title>ws</code>"<td>80
 <tr><td>"<code title>wss</code>"<td>443
</table>


<h3>Writing</h3>

<p>A <span title=concept-url>URL</span> must be either a
<span title=concept-relative-url>relative URL</span> or an
<span title=concept-absolute-url>absolute URL</span>, optionally followed by
a <span title=concept-url-fragment>fragment</span>.

<p>An <span title=concept-absolute-url>absolute URL</span> is a
<span title=concept-url-scheme>scheme</span>, followed by
"<code title>:</code>", followed by
<span title=concept-url-scheme-data>scheme data</span>.

<p>A <span title=concept-url-scheme>scheme</span> is one
<span>ASCII alpha</span>, followed by zero or more of
<span>ASCII alphanumeric</span>, "<code title>+</code>",
"<code title>-</code>", and "<code title>.</code>". A
<span title=concept-url-scheme>scheme</span> must be registered
<span class=XXX>...</span>.

<p>The syntax of <span title=concept-url-scheme-data>scheme data</span>
depends on the <span title=concept-url-scheme>scheme</span> and is typically
defined alongside it. For a <span>relative scheme</span>,
<span title=concept-url-scheme-data>scheme data</span> is a
<span title=concept-scheme-relative-url>scheme-relative URL</span>. For
other <span title=concept-url-scheme>schemes</span>, specifications or
standards must define <span title=concept-url-scheme-data>scheme data</span>
either literally as or as a subset of one or more <span>URL units</span>
that do not start with a "<code title>?</code>".

<p>A <span title=concept-relative-url>relative URL</span> is either a
<span title=concept-scheme-relative-url>scheme-relative URL</span>, an
<span title=concept-absolute-path-relative-url>absolute-path-relative URL</span>,
or a <span title=concept-path-relative-url>path-relative URL</span> that
does not start with a <span title=concept-url-scheme>scheme</span>, followed
by "<code title>:</code>". A
<span title=concept-relative-url>relative URL</span> must be relative to a
<span title=concept-parsed-url>parsed URL</span> with a
<span>relative scheme</span>.

<p>A <dfn title=concept-scheme-relative-url>scheme-relative URL</dfn> is
"<code title>//</code>", optionally followed by
<span title=concept-url-userinfo>userinfo</span> and "<code title>@</code>",
followed by a <span title=concept-host>host</span>, optionally followed
by "<code title>:</code>" and a <span title=concept-url-port>port</span>,
optionally followed by either an
<span title=concept-absolute-path-relative-url>absolute-path-relative URL</span>
or a <span title=concept-url-query>query</span>.

<p>A <span title=concept-url-userinfo>userinfo</span> is zero or more
<span>URL units</span>, excluding "<code title>/</code>",
"<code title>?</code>", and "<code title>@</code>".

<p>A <span title=concept-url-port>port</span> is zero or more
<span>ASCII digits</span>.

<p>An
<dfn title=concept-absolute-path-relative-url>absolute-path-relative URL</dfn>
is "<code title>/</code>", followed by a
<span title=concept-path-relative-url>path-relative URL</span> that does not
start with a "<code title>/</code>".

<p>A <dfn title=concept-path-relative-url>path-relative URL</dfn> is zero or
more <span title="path segment">path segments</span> separated from each
other by a "<code title>/</code>", optionally followed by a
<span title=concept-url-query>query</span>.

<p>A <dfn>path segment</dfn> is zero or more <span>URL units</span>,
excluding "<code title>/</code>" and "<code title>?</code>".

<p>A <span title=concept-url-query>query</span> is "<code title>?</code>",
followed by zero or more <span>URL units</span>.

<p>A <span title=concept-url-fragment>fragment</span> is
"<code title>#</code>", followed by zero or more <span>URL units</span>.

<p>The <dfn>URL units</dfn> are <span>ASCII alphanumeric</span>,
"<code title>!</code>",<!-- 0x21, sub-delims -->
"<code title>$</code>",<!-- 0x24, sub-delims -->
"<code title>&</code>",<!-- 0x26, sub-delims -->
"<code title>'</code>",<!-- 0x27, sub-delims -->
"<code title>(</code>",<!-- 0x28, sub-delims -->
"<code title>)</code>",<!-- 0x29, sub-delims -->
"<code title>*</code>",<!-- 0x2A, sub-delims -->
"<code title>+</code>",<!-- 0x2B, sub-delims -->
"<code title>,</code>",<!-- 0x2C, sub-delims -->
"<code title>-</code>",<!-- 0x2D, iunreserved -->
"<code title>.</code>",<!-- 0x2E, iunreserved -->
"<code title>/</code>",<!-- 0x2F, iquery/ifragment -->
"<code title>:</code>",<!-- 0x3A, ipchar -->
"<code title>;</code>",<!-- 0x3B, sub-delims -->
"<code title>=</code>",<!-- 0x3D, sub-delims -->
"<code title>?</code>",<!-- 0x3F, iquery/ifragment -->
"<code title>@</code>",<!-- 0x40, ipchar -->
"<code title>_</code>",<!-- 0x5F, iunreserved -->
"<code title>~</code>",<!-- 0x7E, iunreserved -->
code points in the ranges
U+00A0 to U+D7FF,
U+E000 to <!--U+F8FF,
U+F900 to -->U+FDCF,
U+FDF0 to U+FFEF,
U+10000 to U+1FFFD,
U+20000 to U+2FFFD,
U+30000 to U+3FFFD,
U+40000 to U+4FFFD,
U+50000 to U+5FFFD,
U+60000 to U+6FFFD,
U+70000 to U+7FFFD,
U+80000 to U+8FFFD,
U+90000 to U+9FFFD,
U+A0000 to U+AFFFD,
U+B0000 to U+BFFFD,
U+C0000 to U+CFFFD,
U+D0000 to U+DFFFD,
U+E1000 to U+EFFFD,
U+F0000 to U+FFFFD,
U+100000 to U+10FFFD,
and <span title="URL-encoded byte">URL-encoded bytes</span>.
<!-- XXX there is a mismatch with
     http://www.whatwg.org/specs/web-apps/current-work/#preprocessing-the-input-stream
     I think they should match, need advice -->

<p class=note>Code points higher than U+009F will be converted to
<span title="URL-encoded byte">URL-encoded bytes</span> by the
<span title=concept-url-parser>parser</span>.



<h3>Parsing</h3>

<p>Aside from the components mentioned earlier, a
<span title=concept-parsed-url>parsed URL</span> also has an associated
<dfn>fatal error flag</dfn>, <dfn>relative flag</dfn>,
<dfn title=concept-parsed-url-input>input</dfn>,
<dfn title=concept-parsed-url-base>base URL</dfn>,
and <dfn title=concept-parsed-url-query-encoding>query encoding</dfn>.

<p>To <dfn>clear</dfn> a <span title=concept-parsed-url>parsed URL</span>,
set its <span title=concept-url-scheme>scheme</span>,
<span title=concept-url-scheme-data>scheme data</span>,
<span title=concept-url-userinfo>userinfo</span>,
<span title=concept-url-host>host</span>,
<span title=concept-url-port>port</span>,
<span title=concept-url-query>query</span>, and
<span title=concept-url-fragment>fragment</span> to the empty string, and
its <span title=concept-url-path>path</span> to the empty list.

<p>To <dfn>invalidate</dfn> a
<span title=concept-parsed-url>parsed URL</span>, <span>clear</span> it, and
then set its <span>fatal error flag</span>.

<!-- the escape sets are minimal as escaping can lead to problems; we might
     be able to escape more here but only if implementors are willing and
     there's an upside -->
<p>The <dfn>URL simple escape set</dfn> are all code points less than
U+0020 (i.e. excluding U+0020) and all code points greater than U+007E.

<p>The <dfn>URL default escape set</dfn> are
all code points less than U+0021,
all code points greater than U+007E,
'<code title>"</code>', <!-- 0x22 -->
"<code title>#</code>", <!-- 0x23 -->
"<code title>&lt;</code>", <!-- 0x3C -->
"<code title>></code>", <!-- 0x3E -->
"<code title>?</code>", <!-- 0x3F -->
and
"<code title>`</code>". <!-- 0x60 -->

<p>The <dfn>URL query escape set</dfn> are
all code points less than U+0021,
all code points greater than U+007E,
'<code title>"</code>', <!-- 0x22 -->
"<code title>#</code>", <!-- 0x23 -->
"<code title>&lt;</code>", <!-- 0x3C -->
"<code title>></code>", <!-- 0x3E -->
and
"<code title>`</code>". <!-- 0x60 -->

<!-- we could inline handling of the EOF code point, U+0009, U+000A, and
     U+000D potentially; have them return the empty string -->
<p>To <dfn>URL escape</dfn> a <var title>code point</var>, using an
<var title>escape set</var>, and an optional
<var title>encoding override</var>, run these steps:

<ol>
 <li><p>Let <var title>encoding</var> be
 <span data-anolis-spec=encoding>utf-8</span>.

 <li><p>If <var title>encoding override</var> is given, set
 <var title>encoding</var> to <var title>encoding override</var>.

 <li><p>If <var title>code point</var> is not in
 <var title>escape set</var>, return <var title>code point</var>.

 <li>
  <p>Let <var title>bytes</var> be the result of running
  <span data-anolis-spec=encoding>encode</span> on <var title>c</var> using
  <var title>encoding</var> as
  <span data-anolis-spec=encoding>encoding</span>.

  <p>Whenever the <span data-anolis-spec=encoding>encoder</span> algorithm
  emits an <span data-anolis-spec=encoding>encoder error</span>, emit a
  0x3F byte instead and do not terminate the algorithm.

  <p class=note>Using <span data-anolis-spec=encoding>utf-8</span> ensures
  you never hit an <span data-anolis-spec=encoding>encoder error</span>
  here, but unfortunately legacy content uses other
  <span data-anolis-spec=encoding title=encoding>encodings</span>.

 <li><p><span>URL encode</span> each byte in <var title>bytes</var>, and
 then return them concatenated, in the same order.
</ol>

<p class=XXX>We will probably add the ability to halt on the first error.
Either as dedicated branches in the parsing section or as an exercise to the
reader by mixing parsing with the constraints of the writing section into a
single algorithm.

<p>To <dfn title=concept-url-parser>parse</dfn> a string <i title>input</i>,
optionally with a <span title=concept-parsed-url>parsed URL</span>
<i title>base</i>, and an <span data-anolis-spec=encoding>encoding</span>
<i title>encoding override</i>, run these steps:

<ol>
 <li><p>Let <var title>url</var> be a new
 <span title=concept-parsed-url>parsed URL</span>.

 <li><p><span>Clear</span> <var title>url</var>.

 <li><p>If <i title>encoding</i> is not given, set it to
 <span data-anolis-spec=encoding>utf-8</span>.

 <li><p>Set <var title>url</var>'s
 <span title=concept-parsed-url-query-encoding>query encoding</span> to
 <i title>encoding override</i>.

 <li><p>If <i title>base</i> is not given, set it to null.

 <li><p>Set <var title>url</var>'s
 <span title=concept-parsed-url-base>base URL</span> to <i title>base</i>.

 <li><p>Set <var title>url</var>'s
 <span title=concept-parsed-url-input>input</span> to <var title>input</var>.

 <li><p>Remove any leading and trailing
 <span data-anolis-spec=encoding>ASCII whitespace</span> from
 <var title>input</var>.

 <li><p><span title=concept-parsed-url-interpret>Interpret</span>
 <var title>input</var>.

 <li><p>Return <var title>url</var>.
</ol>

<p>A <span title=concept-parsed-url>parsed URL</span> also has an associated
<span title=concept-parsed-url-interpret>interpret</span> algorithm. To
<dfn title=concept-parsed-url-interpret>interpret</dfn> a string
<var title>input</var>, optionally with an override state
<var title>override</var>, run these steps:

<ol>
 <li><p>Let <var title>state</var> be <var title>override</var> if given, or
 <b title>scheme start state</b> otherwise.

 <li><p>Let <var title>buffer</var> be the empty string.

 <li><p>Let the <var title>@ flag</var> and the <var title>[] flag</var> be
 unset.

 <li>
  <p>Run the following state machine by switching on <var title>state</var>
  for each code point in <var title>input</var>, and then once more with the
  conceptual <dfn>EOF code point</dfn> (signifies end-of-input). Let the
  code point be <var title>c</var>.

  <dl class=switch>
   <dt><b title>scheme start state</b>
   <dd>
    <ol>
     <li><p>If <var title>c</var> is not the <span>EOF code point</span> and
     is in the range U+0041 through to U+005A or U+0061 through to U+007A,
     append <var title>c</var>, lowercased, to <var title>buffer</var>, and
     set <var title>state</var> to <b title>scheme state</b>.

     <li><p>Otherwise, if <var title>override</var> is not given, set
     <var title>buffer</var> to the empty string, set <var title>state</var>
     to <b title>no scheme state</b>, and rerun this state machine for
     <var title>c</var>.

     <li><p>Otherwise, terminate this algorithm.
    </ol>

   <dt><b title>scheme state</b>
   <dd>
    <ol>
     <li><p>If <var title>c</var> is not the <span>EOF code point</span> and
     is in the range U+0030 through to U+0039, U+0041 through to U+005A,
     U+0061 through to U+007A, or <var title>c</var> is
     "<code title>+</code>", "<code title>-</code>", or
     "<code title>.</code>", append <var title>c</var>, lowercased, to
     <var title>buffer</var>.

     <li>
      <p>Otherwise, if <var title>c</var> is "<code title>:</code>", set
      <span title=concept-url-scheme>scheme</span> to
      <var title>buffer</var>, <var title>buffer</var> to the empty string,
      and then run these substeps:

      <ol>
       <li><p>If <var title>override</var> is given,
       terminate this algorithm.

       <li><p>If <span title=concept-url-scheme>scheme</span> is
       a <span>relative scheme</span>, set the <span>relative flag</span>.

       <li><p>If <span title=concept-url-scheme>scheme</span> is
       "<code title>file</code>", set <var title>state</var> to
       <b title>relative state</b>.
       <!-- not combined with the subsequent step for clarity -->

       <li><p>Otherwise, if the <span>relative flag</span> is set,
       <span title=concept-parsed-url-base>base URL</span> is not null and
       <span title=concept-parsed-url-base>base URL</span>'s
       <span title=concept-url-scheme>scheme</span> is equal to
       <span title=concept-url-scheme>scheme</span>, set
       <var title>state</var> to <b title>relative state</b>.

       <li><p>Otherwise, if the <span>relative flag</span> is set, set
       <var title>state</var> to <b title>authority start state</b>.

       <li><p>Otherwise, set <var title>state</var> to
       <b title>scheme data state</b>.
      </ol>

     <li><p>Otherwise, set <var title>state</var> to <b title>no scheme state</b>,
     <var title>buffer</var> to the empty string, and start over (from the
     first code point in <var title>input</var>).
    </ol>

   <dt><b title>scheme data state</b>
   <dd>
    <ol>
     <li><p>If <var title>override</var> is not given and <var title>c</var>
     is "<code title>#</code>", set
     <span title=concept-url-fragment>fragment</span> to
     "<code title>#</code>" and <var title>state</var> to
     <b title>fragment state</b>.

     <li>
      <p>Otherwise, if <var title>c</var> is none of
      <span>EOF code point</span>, U+0009, U+000A, and U+000D,
      <span>URL escape</span> <var title>c</var> using the
      <span>URL simple escape set</span> and append the result to
      <span title=concept-url-scheme-data>scheme data</span>.

      <p class=note><span title=concept-url-path>Path</span> could be reused
      here to keep <span title=concept-parsed-url>parsed URL</span> simple.
    </ol>

   <dt><b title>no scheme state</b>
   <dd>
    <p>If <span title=concept-parsed-url-base>base URL</span> is null, or
    <span title=concept-parsed-url-base>base URL</span>'s
    <span title=concept-url-scheme>scheme</span> is not a
    <span>relative scheme</span>, <span>invalidate</span>.

    <p class=note>You do not want to check
    <span title=concept-parsed-url-base>base URL</span>'s
    <span>relative flag</span> here, as the
    <span title=concept-url-scheme>scheme</span> itself can have been
    changed to something non-sensical through the
    <code title=dom-URL-protocol>protocol</code> attribute.

    <p>Otherwise, set <var title>state</var> to <b title>relative state</b>,
    and rerun this state machine for <var title>c</var>.

   <dt><b title>relative state</b>
   <dd>
    <p>Let <var title>base</var> be
    <span title=concept-parsed-url-base>base URL</span>, set the
    <span>relative flag</span>, set
    <span title=concept-url-scheme>scheme</span> to
    <var title>base</var>'s
    <span title=concept-url-scheme>scheme</span>, and then, based on
    <var title>c</var>:

    <dl class=switch>
     <dt><span>EOF code point</span>
     <dd>
      <p>Set <span title=concept-url-host>host</span> to
      <var title>base</var>'s <span title=concept-url-host>host</span>,
      <span title=concept-url-port>port</span> to
      <var title>base</var>'s <span title=concept-url-port>port</span>,
      <span title=concept-url-path>path</span> to
      <var title>base</var>'s <span title=concept-url-path>path</span>,
      <span title=concept-url-query>query</span> to
      <var title>base</var>'s <span title=concept-url-query>query</span>,
      and then terminate this algorithm.

     <dt>"<code title>/</code>"
     <dt>"<code title>\</code>"
     <dd>
      <p>If the code point in <var title>input</var> after
      <var title>c</var> is either "<code title>/</code>" or
      "<code title>\</code>", run these steps:

      <ol>
       <li><p>If <span title=concept-url-scheme>scheme</span> is
       "<code title>file</code>" set <var title>state</var> to
       <b title>host state</b>.

       <li><p>Otherwise set <var title>state</var> to
       <b title>authority start state</b>.

       <li>
        <p>Skip the code point after <var title>c</var> when running this
        state machine again.

        <p class=note>In other words, skipping the code point determined to
        be either "<code title>/</code>" or "<code title>\</code>".
      </ol>

      <p>Otherwise, set <span title=concept-url-host>host</span> to
      <var title>base</var>'s <span title=concept-url-host>host</span>,
      <span title=concept-url-port>port</span> to
      <var title>base</var>'s <span title=concept-url-port>port</span>,
      <var title>state</var> to <b title>relative path start state</b>,
      and rerun this state machine for <var title>c</var>.

     <dt>"<code title>?</code>"
     <dd><p>Set <span title=concept-url-host>host</span> to
     <var title>base</var>'s <span title=concept-url-host>host</span>,
     <span title=concept-url-port>port</span> to
     <var title>base</var>'s <span title=concept-url-port>port</span>,
     <span title=concept-url-path>path</span> to
     <var title>base</var>'s <span title=concept-url-path>path</span>,
     <span title=concept-url-query>query</span> to "<code title>?</code>",
     and <var title>state</var> to <b title>query state</b>.

     <dt>"<code title>#</code>"
     <dd><p>Set <span title=concept-url-host>host</span> to
     <var title>base</var>'s <span title=concept-url-host>host</span>,
     <span title=concept-url-port>port</span> to
     <var title>base</var>'s <span title=concept-url-port>port</span>,
     <span title=concept-url-path>path</span> to
     <var title>base</var>'s <span title=concept-url-path>path</span>,
     <span title=concept-url-query>query</span> to
     <var title>base</var>'s <span title=concept-url-query>query</span>,
     <span title=concept-url-fragment>fragment</span> to
     "<code title>#</code>", and <var title>state</var> to
     <b title>fragment state</b>.

     <dt>Otherwise
     <dd><p>Set <span title=concept-url-host>host</span> to
     <var title>base</var>'s <span title=concept-url-host>host</span>,
     <span title=concept-url-port>port</span> to
     <var title>base</var>'s <span title=concept-url-port>port</span>,
     <span title=concept-url-path>path</span> to
     <var title>base</var>'s <span title=concept-url-path>path</span>, then
     remove <span title=concept-url-path>path</span>'s last string, set
     <var title>state</var> to <b title>relative path start state</b>,
     and rerun this state machine for <var title>c</var>.
    </dl>

   <dt><b title>authority start state</b>
   <dd><p>If <var title>c</var> is neither "<code title>/</code>" nor
   "<code title>\</code>", set <var title>state</var> to
   <b title>authority state</b>, and rerun this state machine for
   <var title>c</var>.

   <dt><b title>authority state</b>
   <dd>
    <p>Based on <var title>c</var>:
    <dl class=switch>
     <dt>"<code title>@</code>"
     <dd>
      <ol>
       <li><p>If the <var title>@ flag</var> is set, append
       "<code title>%40</code>" to
       <span title=concept-url-userinfo>userinfo</span>.

       <li><p>Set the <var title>@ flag</var>.

       <li><p>For each code point in <var title>buffer</var>,
       <span>URL escape</span> it using the
       <span>URL default escape set</span>, and append the result to
       <span title=concept-url-userinfo>userinfo</span>

       <li><p>Set <var title>buffer</var> to the empty string.
      </ol>
     <dt><span>EOF code point</span>
     <dt>"<code title>/</code>"
     <dt>"<code title>\</code>"
     <dt>"<code title>?</code>"
     <dt>"<code title>#</code>"
     <dd><p>Rerun this state machine for all code points in
     <var title>buffer</var>, set <var title>buffer</var> to the empty
     string, and <var title>state</var> to <b title>host state</b>.

     <dt>Otherwise
     <dd><p>Append <var title>c</var> to <var title>buffer</var>.
    </dl>

   <dt><b title>host state</b>
   <dt><b title>hostname state</b>
   <dd>
    <ol>
     <li>
      <p>If <var title>c</var> is "<code title>:</code>" and the
      <var title>[] flag</var> is unset, run these substeps:

      <ol>
       <li><p>If <span title=concept-url-scheme>scheme</span> is
       "<code title>file</code>", <span>invalidate</span>.

       <li><p>Set <span title=concept-url-host>host</span> to
       <var title>buffer</var>,<!-- XXX host normalize -->
       <var title>buffer</var> to the empty string,
       and <var title>state</var> to <b title>port state</b>.

       <li><p>If <var title>override</var> is <b title>hostname state</b>,
       terminate this algorithm.
      </ol>

     <li>
      <p>Otherwise, if <var title>c</var> is one of
      <span>EOF code point</span>, "<code title>/</code>",
      "<code title>\</code>", "<code title>?</code>", and
      "<code title>#</code>", run these substeps:

      <ol>
       <li><p>Set <span title=concept-url-host>host</span> to
       <var title>buffer</var>,<!-- XXX host normalize -->
       <var title>buffer</var> to the empty string,
       and <var title>state</var> to <b title>relative path start state</b>.

       <li><p>If <var title>override</var> is given, terminate this
       algorithm.

       <li><p>Otherwise, rerun this state machine for <var title>c</var>.
      </ol>

     <li>
      <p>Otherwise, if <var title>c</var> is none of U+0009, U+000A, and
      U+000D, run these substeps:

      <ol>
       <li><p>If <var title>c</var> is "<code title>[</code>", set the
       <var title>[] flag</var>.

       <li><p>If <var title>c</var> is "<code title>]</code>", unset the
       <var title>[] flag</var>.

       <li><p>Append <var title>c</var> to <var title>buffer</var>.
      </ol>
    </ol>

   <dt><b title>port state</b>
   <dd>
    <ol>
     <li><p>If <var title>c</var> is in the range U+0030 through to U+0039,
     append <var title>c</var> to <var title>buffer</var>.

     <li>
      <p>Otherwise, if <var title>c</var> is one of
      <span>EOF code point</span>, "<code title>/</code>",
      "<code title>\</code>", "<code title>?</code>", and
      "<code title>#</code>", or <var title>override</var> is given, run
      these substeps:
      <ol>
       <li><p class=XXX>parse buffer and set port

       <li><p>If <var title>override</var> is given, terminate this
       algorithm.

       <li><p>Set <var title>buffer</var> to the empty string,
       <var title>state</var> to <b title>relative path start state</b>, and
       rerun this state machine for <var title>c</var>.
      </ol>

     <li><p>Otherwise, <span>invalidate</span>.
    </ol>

   <dt><b title>relative path start state</b>
   <dd><p>Set <var title>state</var> to <b title>relative path state</b> and
   if <var title>c</var> is neither "<code title>/</code>" nor
   "<code title>\</code>", rerun this state machine for <var title>c</var>.

   <dt><b title>relative path state</b>
   <dd>
    <ol>
     <li>
      <p>If either <var title>c</var> is one of
      <span>EOF code point</span>, "<code title>/</code>", and
      "<code title>\</code>", or <var title>override</var> is not given and
      <var title>c</var> is one of "<code title>?</code>" and
      "<code title>#</code>", run these substeps:
      <ol>
       <li><p>If <var title>buffer</var> is "<code title>..</code>" and
       <var title>c</var> is one of <span>EOF code point</span>,
       "<code title>/</code>", and "<code title>\</code>", set the last
       string in <span title=concept-url-path>path</span> to the empty
       string.

       <li><p>Otherwise, if <var title>buffer</var> is
       "<code title>..</code>", remove the last string from
       <span title=concept-url-path>path</span>.

       <li><p>Otherwise, if <var title>buffer</var> is
       "<code title>.</code>" and <var title>c</var> is one of
       <span>EOF code point</span>, "<code title>/</code>", and
       "<code title>\</code>", append an empty string to
       <span title=concept-url-path>path</span>.

       <li><p>Otherwise, if <var title>buffer</var> is not
       "<code title>.</code>", append <var title>buffer</var> to
       <span title=concept-url-path>path</span>.

       <li><p>Set <var title>buffer</var> to the empty string.

       <li><p>If <var title>c</var> is "<code title>?</code>", set
       <span title=concept-url-query>query</span> to "<code title>?</code>",
       and <var title>state</var> to <b title>query state</b>.

       <li><p>If <var title>c</var> is "<code title>#</code>", set
       <span title=concept-url-fragment>fragment</span> to
       "<code title>#</code>", and <var title>state</var> to
       <b title>fragment state</b>.
      </ol>

     <li><p>Otherwise, if <var title>c</var> is none of U+0009, U+000A, and
     U+000D, <span>URL escape</span> <var title>c</var> using the
     <span>URL default escape set</span> and append the result to
     <var title>buffer</var>.
    </ol>

   <dt><b title>query state</b>
   <dd>
    <ol>
     <li><p>If <var title>override</var> is not given and <var title>c</var>
     is "<code title>#</code>", set
     <span title=concept-url-fragment>fragment</span> to
     "<code title>#</code>", and state to <b title>fragment state</b>.

     <li>
      <p>Otherwise, if <var title>c</var> is none of
      <span>EOF code point</span>, U+0009, U+000A, and U+000D,
      <span>URL escape</span> <var title>c</var> using the
      <span>URL query escape set</span> and
      <span title=concept-parsed-url-query-encoding>query encoding</span>,
      and append the result to
      <span title=concept-url-query>query</span>.

      <p class=XXX>Only use
      <span title=concept-parsed-url-query-encoding>query encoding</span>
      for http/https/file rather than for all relative schemes?
    </ol>

   <dt><b title>fragment state</b>
   <dd><p>If <var title>c</var> is none of <span>EOF code point</span>,
   U+0009, U+000A, and U+000D, <span>URL escape</span> <var title>c</var>
   using the <span title>URL simple escape set</span> and append the result
   to <span title=concept-url-fragment>fragment</span>.
   <!-- if people complain about this do not forget that results may differ
        depending on whether or not a relative scheme is in play -->
  </dl>
</ol>

<h3>Serializing</h3>

<p class=note>The serializing algorithms assume a
<span title=concept-parsed-url>parsed URL</span>'s
<span>fatal error flag</span> is not set.

<p>To <dfn title=concept-url-serializer>serialize</dfn> a
<span title=concept-parsed-url>parsed URL</span>, return the result of
<span title=concept-url-serializer-without-fragment>serializing it without fragment</span>
concatenated with its
<span title=concept-url-fragment>fragment</span>.

<p>To
<dfn title=concept-url-serializer-without-fragment>serialize without fragment</dfn>
a <span title=concept-parsed-url>parsed URL</span>, run these steps:
<!-- better wording anyone?! -->

<ol>
 <li><p>Let <var title>output</var> be
 <span title=concept-url-scheme>scheme</span> and
 "<code title>:</code>" concatenated.

 <li>
  <p>If the <span>relative flag</span> is set:

  <ol>
   <li><p>Append "<code title>//</code>" to <var title>output</var>.

   <li><p>If <span title=concept-url-userinfo>userinfo</span> is not
   the empty string, append
   <span title=concept-url-userinfo>userinfo</span> and
   "<code title>@</code>" concatenated to <var title>output</var>.

   <li><p>Append <span title=concept-url-host>host</span> to
   <var title>output</var>.

   <li><p>If <span title=concept-url-port>port</span> is not
   the empty string, append "<code title>:</code>" and
   <span title=concept-url-port>port</span> concatenated to
   <var title>output</var>.

   <li><p>Append "<code title>/</code>" concatenated with the strings in
   <span title=concept-url-path>path</span> (including empty strings),
   separated from each other by "<code title>/</code>".
  </ol>

 <li><p>If the <span>relative flag</span> is unset, append
 <span title=concept-url-path>path</span>'s only string (if any).

 <li><p>Append <span title=concept-url-query>query</span> to
 <var title>output</var>, and then return <var title>output</var>.
</ol>



<h2>API</h2>

<!-- XXX http://lists.w3.org/Archives/Public/public-script-coord/2012OctDec/0082.html
     s/DOMString/UTFString -->

<pre class=idl>[<span title=dom-URL>Constructor</span>(DOMString <var title>url</var>, optional (<span>URL</span> or DOMString) <var title>base</var>)]
interface <dfn>URL</dfn> {
};
<span>URL</span> implements <span>URLUtils</span>;

[NoInterfaceObject]
interface <dfn>URLUtils</dfn> {
  stringifier attribute DOMString <span title=dom-URL-href>href</span>;
  readonly attribute DOMString <span title=dom-URL-origin>origin</span>;

           attribute DOMString <span title=dom-URL-protocol>protocol</span>;
           attribute DOMString <span title=dom-URL-host>host</span>;
           attribute DOMString <span title=dom-URL-hostname>hostname</span>;
           attribute DOMString <span title=dom-URL-port>port</span>;
           attribute DOMString <span title=dom-URL-pathname>pathname</span>;
           attribute DOMString <span title=dom-URL-search>search</span>;
  readonly attribute <span>URLQuery</span> <span title=dom-URL-query>query</span>;
           attribute DOMString <span title=dom-URL-hash>hash</span>;
};</pre>

<!-- Ideas:
           attribute DOMString user;
           attribute DOMString password; // or maybe userinfo instead?
           attribute DOMString basename; // last segment of path (Simon Sapin)
           sequence<DOMString> getPath();
           void setPath(DOMString segments...);

     Maybe also a way of comparing URLs? Or maybe rather a way to normalize
     a URL in a way that makes string comparison work better.

     Working with relative paths is another thing we could improve. E.g. a
     relPathname setter that would resolve the given value against pathname.

     Could make manipulation of host easier by exposing the labels similarly
     to the proposal for path segments above. (Should never expose
     effective TLD as it's evil.) -->

<p>Any object implementing <code>URLUtils</code> represents a
<span title=concept-parsed-url>parsed URL</span>. Thus <code>URL</code>
represents a <span title=concept-parsed-url>parsed URL</span>.

<p>Any object implementing <code>URLUtils</code> also has one associated
<code>URLQuery</code> object.

<p class=note>The <code>URL</code> object and
<span title=concept-url>URL</span> share the same name, because naming the
exposed object <code title>ParsedURL</code> would be ugly.


<h3>Constructors</h3> <!-- "constructor" causes dfn.js to fail -->

<p>The
<dfn title=dom-URL><code>URL(<var title>url</var>, <var title>base</var>)</code></dfn>
constructor must run these steps:

<ol>
 <li><p>If <var title>base</var> is given and is a string,
 <span title=concept-url-parser>parse</span> <var title>base</var> and set
 <var title>base</var> to the result of that algorithm.

 <li><p>If <var title>base</var> is given and its
 <span>fatal error flag</span> is set, throw a
 "<code data-anolis-spec=dom>InvalidStateError</code>".

 <li><p><span title=concept-url-parser>Parse</span> <var title>url</var>
 with <var title>base</var> as <i title>base</i>, if <i title>base</i> is
 given, associate it with a new <code>URL</code> object, and then return
 that <code>URL</code> object.
</ol>


<h3>Interface <code title>URLUtils</code></h3>

<p class=note>The <code>URLUtils</code> interface is not exposed on the
global object. It augments other interfaces, such as <code>URL</code>.

<p>The <dfn title=dom-URL-href><code>href</code></dfn> attribute must run
these steps:

<ol>
 <li><p>If the <span>fatal error flag</span> is set, return
 <span title=concept-parsed-url-input>input</span>.

 <li><p>Return the <span title=concept-url-serializer>serialization</span>.
</ol>

<p>Setting the <code title=dom-URL-href>href</code> attribute must
run these steps:

<ol>
 <li><p><span>Clear</span>.

 <li><p>Set <span title=concept-parsed-url-input>input</span> to the given value.

 <li><p><span title=concept-parsed-url-interpret>Interpret</span>
 <span title=concept-parsed-url-input>input</span>, with any leading and trailing
 <span data-anolis-spec=encoding>ASCII whitespace</span> removed, as
 <i title>input</i>.
</ol>

<p>The <dfn title=dom-URL-origin><code>origin</code></dfn> attribute must
return the <span data-anolis-spec=origin>Unicode serialization</span> of
the <span title=concept-parsed-url>parsed URL</span>'s
<span data-anolis-spec=origin>origin</span>.
<span data-anolis-ref>ORIGIN</span>

<p class=note>It returns the Unicode rather than the ASCII serialization for
compatibility with HTML's <code>MessageEvent</code> feature.
<span data-anolis-ref class=informative>HTML</span>

<p>The <dfn title=dom-URL-protocol><code>protocol</code></dfn> attribute
must return <span title=concept-url-scheme>scheme</span> and
"<code title>:</code>" concatenated.

<p class=note>In case the <span>fatal error flag</span> is set this will
cause it to return "<code title>:</code>".

<p>Setting the <code title=dom-URL-protocol>protocol</code> attribute must
run these steps:

<ol>
 <li><p>If the <span>fatal error flag</span> is set, terminate these steps.

 <li><p><span title=concept-parsed-url-interpret>Interpret</span> with the
 given value and "<code title>:</code>" concatenated as <i title>input</i>
 and <b title>scheme start state</b> as <i title>override</i>.
</ol>

<p>The <dfn title=dom-URL-host><code>host</code></dfn> attribute must run
these steps:

<ol>
 <li><p>If the <span>fatal error flag</span> is set, return the empty string.

 <li><p>If <span title=concept-url-port>port</span> is the empty string,
 return <span title=concept-url-host>host</span>.

 <li><p>Return <span title=concept-url-host>host</span>,
 "<code title>:</code>", and <span title=concept-url-port>port</span>
 concatenated.
</ol>

<p>Setting the <code title=dom-URL-host>host</code> attribute must run these
steps:

<ol>
 <li><p>If the <span>fatal error flag</span> is set, or the
 <span>relative flag</span> is unset, terminate these steps.

 <li><p><span title=concept-parsed-url-interpret>Interpret</span> with the
 given value as <i title>input</i> and <b title>host state</b> as
 <i title>override</i>.
</ol>

<p>The <dfn title=dom-URL-hostname><code>hostname</code></dfn> attribute
must return <span title=concept-url-host>host</span>.

<p>Setting the <code title=dom-URL-hostname>hostname</code> attribute must
run these steps:

<ol>
 <li><p>If the <span>fatal error flag</span> is set, or the
 <span>relative flag</span> is unset, terminate these steps.

 <li><p><span title=concept-parsed-url-interpret>Interpret</span> with the
 given value as <i title>input</i> and <b title>hostname state</b> as
 <i title>override</i>.
</ol>

<p>The <dfn title=dom-URL-port><code>port</code></dfn> attribute must return
<span title=concept-url-port>port</span>.

<p>Setting the <code title=dom-URL-port>port</code> attribute must run these
steps:

<ol>
 <li><p>If the <span>fatal error flag</span> is set, or the
 <span>relative flag</span> is unset, terminate these steps.

 <li><p><span title=concept-parsed-url-interpret>Interpret</span> with the
 given value as <i title>input</i> and <b title>port state</b> as
 <i title>override</i>.
</ol>

<p>The <dfn title=dom-URL-pathname><code>pathname</code></dfn> attribute
must run these steps:

<ol>
 <li><p>If the <span>fatal error flag</span> is set, return the empty string.

 <li><p>If the <span>relative flag</span> is unset, return
 <span title=concept-url-scheme-data>scheme data</span>.

 <li><p>Return "<code title>/</code>" concatenated with the strings in
 <span title=concept-url-path>path</span> (including empty strings),
 separated from each other by "<code title>/</code>".
</ol>

<p>Setting the <code title=dom-URL-pathname>pathname</code> attribute must
run these steps:

<ol>
 <li><p>If the <span>fatal error flag</span> is set, or the
 <span>relative flag</span> is unset, terminate these steps.

 <li><p>Set <span title=concept-url-path>path</span> to the empty list.

 <li><p><span title=concept-parsed-url-interpret>Interpret</span> with the
 given value as <i title>input</i> and <b title>relative path start state</b>
 as <i title>override</i>.
</ol>

<p>The <dfn title=dom-URL-search><code>search</code></dfn> attribute must
run these steps:

<ol>
 <li><p>If the <span>fatal error flag</span> is set, or
 <span title=concept-url-query>query</span> is either the empty string or
 "<code title>?</code>", return the empty string.

 <li><p>Return <span title=concept-url-query>query</span>.
</ol>

<p>Setting the <code title=dom-URL-search>search</code> attribute must run
these steps:

<ol>
 <li><p>If the <span>fatal error flag</span> is set, or the
 <span>relative flag</span> is unset, terminate these steps.

 <li><p>Let <var title>input</var> be the given value with a single leading
 "<code title>?</code>" removed, if any.

 <li><p><span title=concept-parsed-url-interpret>Interpret</span> with
 <var title>input</var> as <i title>input</i> and <b title>query state</b> as
 <i title>override</i>.
</ol>

<p>The <dfn title=dom-URL-query><code>query</code></dfn> attribute must
return the associated <code>URLQuery</code> object.

<p>The <dfn title=dom-URL-hash><code>hash</code></dfn> attribute must run
these steps:

<ol>
 <li><p>If the <span>fatal error flag</span> is set, or
 <span title=concept-url-fragment>fragment</span> is either the empty string
 or "<code title>#</code>", return the empty string.

 <li><p>Return <span title=concept-url-fragment>fragment</span>.
</ol>

<p>Setting the <code title=dom-URL-hash>hash</code> attribute must run these
steps:

<ol>
 <li><p>If the <span>fatal error flag</span> is set, or the
 <span title=concept-url-scheme>scheme</span> is
 "<code title>javascript</code>", terminate these steps.

 <li><p>Let <var title>input</var> be the given value with a single leading
 "<code title>#</code>" removed, if any.

 <li><p><span title=concept-parsed-url-interpret>Interpret</span> with
 <var title>input</var> as <i title>input</i> and <b title>fragment state</b> as
 <i title>override</i>.
</ol>


<h3>Interface <code title>URLQuery</code></h3>

<pre class=idl>interface <dfn>URLQuery</dfn> {
  DOMString? <span title=dom-URLQuery-get>get</span>(DOMString <var title>name</var>);
  sequence&lt;DOMString> <span title=dom-URLQuery-getAll>getAll</span>(DOMString <var title>name</var>);
  void <span title=dom-URLQuery-set>set</span>(DOMString name, (sequence&lt;DOMString> or DOMString) <var title>value</var>);
  void <span title=dom-URLQuery-delete>delete</span>(DOMString <var title>name</var>);
};</pre>

<p class=XXX>...



<h2 class=no-num>References</h2>
<div id=anolis-references></div>



<h2 class=no-num>Acknowledgments</h2>

<p>Thanks to
Adam Barth,
Alexandre Morgaut,
Boris Zbarsky,
David Sheets,
Erik Arvidsson,
Gavin Carothers,
Glenn Maynard,
Ian Hickson,
James Graham,
James Manger,
Mathias Bynens,
Michael™ Smith,
Rodney Rehm,
Simon Pieters,
Tab Atkins
for being awesome!

<!-- http://dvcs.w3.org/hg/url/raw-file/feb258fa6ab5/Overview.html -->

<p>While this standard has been written from scratch, special thanks should
be extended to the editors of the various specifications that previously
defined what we now call URLs:
Larry Masinter,
Martin Dürst,
Michel Suignard,
Roy Fielding, and
Tim Berners-Lee.

<!-- RFC 3986, RFC 3987 -->



<script id=head src=http://www.whatwg.org/specs/web-apps/current-work/dfn.js></script>
