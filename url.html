<!DOCTYPE html><html lang="en-US"><meta charset="utf-8">
<title>URL Standard</title>
<link href="//www.whatwg.org/style/specification" rel="stylesheet">
<link href="//www.whatwg.org/images/icon" rel="icon">

<div class="head">

<h1>URL</h1>
<h2 class="no-num no-toc" id="living-standard-—-last-updated-20-september-2012">Living Standard — Last Updated 20 September 2012</h2>

<dl>
 <dt>This Version:
 <dd><a href="//url.spec.whatwg.org/">http://url.spec.whatwg.org/</a>

 <dt>Participate:</dt>
 <dd>Send feedback to
  <a href="http://www.whatwg.org/mailing-list">whatwg@whatwg.org</a>
  <!--(<a href=XXX>archives</a>)--> or
  <a href="https://www.w3.org/Bugs/Public/enter_bug.cgi?product=WebAppsWG&amp;component=URL">file a bug</a>
  (<a href="https://www.w3.org/Bugs/Public/buglist.cgi?product=WebAppsWG&amp;component=URL&amp;resolution=---">open bugs</a>)
 <dd><a href="http://wiki.whatwg.org/wiki/IRC">IRC: #whatwg on Freenode</a>

 <dt>Version History:
 <dd><a href="https://github.com/whatwg/url/commits">https://github.com/whatwg/url/commits</a></dd>

 <dt>Editor:
 <dd class="h-card vcard"><a class="u-url url p-name fn" href="http://annevankesteren.nl/" lang="nl">Anne van Kesteren</a>
  &lt;<a class="u-email email " href="mailto:annevk@annevk.nl">annevk@annevk.nl</a>&gt;
</dl>

<script async="" src="//dvcs.w3.org/hg/quirks-mode/raw-file/tip/file-bug.js"></script>

<p class="copyright"><a href="http://creativecommons.org/publicdomain/zero/1.0/" rel="license"><img alt="CC0" src="http://i.creativecommons.org/p/zero/1.0/80x15.png"></a>
To the extent possible under law, the editors have waived all copyright and
related or neighboring rights to this work. In addition, as of
20 September 2012, the editors have made this specification available
under the
<a href="http://www.openwebfoundation.org/legal/the-owf-1-0-agreements/owfa-1-0" rel="license">Open Web Foundation Agreement Version 1.0</a>,
which is available at
http://www.openwebfoundation.org/legal/the-owf-1-0-agreements/owfa-1-0.

</div>



<h2 class="no-num no-toc" id="table-of-contents">Table of Contents</h2>

<!--begin-toc-->
<ol class="toc">
 <li><a href="#conformance"><span class="secno">1 </span>Conformance</a></li>
 <li><a href="#terminology"><span class="secno">2 </span>Terminology</a></li>
 <li><a href="#host-names-and-ip-addresses"><span class="secno">3 </span>Host names and IP addresses</a></li>
 <li><a href="#urls"><span class="secno">4 </span>URLs</a>
  <ol>
   <li><a href="#writing"><span class="secno">4.1 </span>Writing</a></li>
   <li><a href="#creating"><span class="secno">4.2 </span>Creating</a></li>
   <li><a href="#api"><span class="secno">4.3 </span>API</a>
    <ol>
     <li><a href="#constructor"><span class="secno">4.3.1 </span>Constructor</a></li>
     <li><a href="#urlutils-members"><span class="secno">4.3.2 </span><code>URLUtils</code> members</a></ol></ol></li>
 <li><a class="no-num" href="#references">References</a></li>
 <li><a class="no-num" href="#acknowledgments">Acknowledgments</a></ol>
<!--end-toc-->



<h2 id="conformance"><span class="secno">1 </span>Conformance</h2>
<p>All diagrams, examples, and notes in this specification are
non-normative, as are all sections explicitly marked non-normative.
Everything else in this specification is normative.

<p>The key words "MUST", "MUST NOT", "REQUIRED", <!--"SHALL", "SHALL
NOT",--> "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and
"OPTIONAL" in the normative parts of this specification are to be
interpreted as described in RFC2119. For readability, these words do
not appear in all uppercase letters in this specification.
<a href="#refsRFC2119">[RFC2119]</a>



<h2 id="terminology"><span class="secno">2 </span>Terminology</h2>

<p>The <dfn id="space-character" title="space character">space characters</dfn>, for the
purposes of this specification, are U+0020 SPACE, U+0009 CHARACTER
TABULATION (tab), U+000A LINE FEED (LF), U+000C FORM FEED (FF), and
U+000D CARRIAGE RETURN (CR).



<h2 id="host-names-and-ip-addresses"><span class="secno">3 </span>Host names and IP addresses</h2>

<ul class="XXX">
 <li>Normalize IPv6 addresses
 <li>IDNA2003 vs IDNA2008 (and also UTS #46)
</ul>



<h2 id="urls"><span class="secno">4 </span>URLs</h2>

<p>A <dfn id="concept-url" title="concept-url">URL</dfn> identifies a resource. It consists of
the following components:
<dfn id="concept-url-scheme" title="concept-url-scheme">scheme</dfn>,
<dfn id="concept-url-userinfo" title="concept-url-userinfo">userinfo</dfn>,
<dfn id="concept-url-host" title="concept-url-host">host</dfn>,
<dfn id="concept-url-port" title="concept-url-port">port</dfn>,
<dfn id="concept-url-path" title="concept-url-path">path</dfn>,
<dfn id="concept-url-query" title="concept-url-query">query</dfn>, and
<dfn id="concept-url-fragment" title="concept-url-fragment">fragment</dfn>.

<p>A <a href="#concept-url" title="concept-url">URL</a> also has an associated
<dfn id="invalid-flag">invalid flag</dfn>, <dfn id="hierarchical-flag">hierarchical flag</dfn>,
<dfn id="concept-url-input" title="concept-url-input">input</dfn>,
<dfn id="concept-url-base" title="concept-url-base">base URL</dfn>,
and <dfn id="concept-url-query-encoding" title="concept-url-query-encoding">query encoding</dfn>.


<p>An <dfn id="hierarchical-scheme">hierarchical scheme</dfn> is a
<a href="#concept-url-scheme" title="concept-url-scheme">scheme</a> listed in the first column of
the following table. It has an associated default
<a href="#concept-url-port" title="concept-url-port">port</a> listed in the second column on the
same row.

<table>
 <tr><th><a href="#concept-url-scheme" title="concept-url-scheme">Scheme</a>
     <th><a href="#concept-url-port" title="concept-url-port">Port</a>
 <tr><td>"<code title="">ftp</code>"<td>21
 <tr><td>"<code title="">gopher</code><td>70
 <tr><td>"<code title="">http</code>"<td>80
 <tr><td>"<code title="">https</code>"<td>443
 <tr><td>"<code title="">ws</code>"<td>80
 <tr><td>"<code title="">wss</code>"<td>443
</table>



<h3 id="writing"><span class="secno">4.1 </span>Writing</h3>

<p class="XXX">



<h3 id="creating"><span class="secno">4.2 </span>Creating</h3>

<p>To <dfn id="concept-url-create" title="concept-url-create">create</dfn> a
<a href="#concept-url" title="concept-url">URL</a> from a string <i title="">input</i>,
optionally with a <a href="#concept-url" title="concept-url">URL</a> <i title="">base</i>
and an <a class="external" data-anolis-spec="encoding" href="http://encoding.spec.whatwg.org/#encoding">encoding</a>
<i title="">encoding</i>, run these steps:

<ol>
 <li><p>Let <var title="">url</var> be a new
 <a href="#concept-url" title="concept-url">URL</a>.

 <li><p>If <i title="">encoding</i> is not set, set it to
 <a class="external" data-anolis-spec="encoding" href="http://encoding.spec.whatwg.org/#utf-8">utf-8</a>.

 <li><p>Set <var title="">url</var>'s
 <a href="#concept-url-query-encoding" title="concept-url-query-encoding">query encoding</a> to
 <i title="">encoding</i>.

 <li><p>If <i title="">base</i> is not set, set it to null.

 <li><p>Set <var title="">url</var>'s
 <a href="#concept-url-base" title="concept-url-base">base URL</a> to <i title="">base</i>.

 <li><p>Set <var title="">url</var>'s
 <a href="#concept-url-input" title="concept-url-input">input</a> to <var title="">input</var>.

 <li><p>Remove any leading and trailing
 <a href="#space-character" title="space character">space characters</a> from
 <var title="">input</var>.

 <li><p><a href="#concept-url-parse" title="concept-url-parse">Parse</a> <var title="">input</var>.

 <li><p>Return <var title="">url</var>.
</ol>

<p>A <a href="#concept-url" title="concept-url">URL</a> also has an associated
<a href="#concept-url-parse" title="concept-url-parse">parse</a> algorithm. To
<dfn id="concept-url-parse" title="concept-url-parse">parse</dfn> a string <var title="">input</var>,
optionally with an override state <var title="">override</var>, run these
steps:

<ol>
 <li><p>Let <var title="">state</var> be <var title="">override</var> if given, or
 <b title="">scheme start</b> otherwise.

 <li><p>Let <var title="">buffer</var> be the empty string.

 <li><p>Let the <var title="">@ flag</var> and <var title="">[] flag</var> be
 unset.

 <li>
  <p>Run the following state machine by switching on <var title="">state</var>
  for each code point in <var title="">input</var>, and then once more with the
  conceptual <dfn id="eof-code-point">EOF code point</dfn>. Let the code point be
  <var title="">c</var>.

  <dl class="switch">
   <dt><b title="">scheme start</b>
   <dd>
    <ol>
     <li><p>If <var title="">c</var> is not the <a href="#eof-code-point">EOF code point</a> and
     is in the range U+0041 through to U+005A or U+0061 through to U+007A,
     append <var title="">c</var>, lowercased, to <var title="">buffer</var>, and
     set <var title="">state</var> to <b title="">scheme</b>.

     <li><p>Otherwise, if <var title="">override</var> is not given, set
     <var title="">buffer</var> to the empty string, set <var title="">state</var>
     to <b title="">no scheme</b>, and rerun this state machine for
     <var title="">c</var>.

     <li><p>Otherwise, terminate this algorithm.
    </ol>

   <dt><b title="">scheme</b>
   <dd>
    <ol>
     <li><p>If <var title="">c</var> is not the <a href="#eof-code-point">EOF code point</a> and
     is in the range U+0030 through to U+0039, U+0041 through to U+005A,
     U+0061 through to U+007A, or <var title="">c</var> is
     "<code title="">+</code>", "<code title="">-</code>", or
     "<code title="">.</code>", append <var title="">c</var>, lowercased, to
     <var title="">buffer</var>.

     <li>
      <p>Otherwise, if <var title="">c</var> is "<code title="">:</code>", set
      <a href="#concept-url-scheme" title="concept-url-scheme">scheme</a> to
      <var title="">buffer</var>, <var title="">buffer</var> to the empty string,
      and then run these substeps:
      <!-- XXX hierarchical flag -->

      <ol>
       <li><p>If <var title="">override</var> is given,
       terminate this algorithm.

       <li><p>Otherwise, if the <a href="#hierarchical-flag">hierarchical flag</a> is set,
       <a href="#concept-url-base" title="concept-url-base">base URL</a> is not null and
       <a href="#concept-url-base" title="concept-url-base">base URL</a>'s
       <a href="#concept-url-scheme" title="concept-url-scheme">scheme</a> is equal to
       <a href="#concept-url-scheme" title="concept-url-scheme">scheme</a>, set
       <var title="">state</var> to <b title="">hierarchical</b>.

       <li><p>Otherwise, if the <a href="#hierarchical-flag">hierarchical flag</a> is set, set
       <var title="">state</var> to <b title="">authority start</b>.

       <li><p>Otherwise, set <var title="">state</var> to <b title="">path</b>.
      </ol>

     <li><p>Otherwise, set <var title="">state</var> to <b title="">no scheme</b>
     and start over (from the first code point in <var title="">input</var>).
    </ol>

   <dt><b title="">no scheme</b>
   <dd>
    <p>If <a href="#concept-url-base" title="concept-url-base">base URL</a> is not null and
    <a href="#concept-url-base" title="concept-url-base">base URL</a>'s
    <a href="#hierarchical-flag">hierarchical flag</a> is set, <span>mark invalid</span>.

    <p>Otherwise, set <var title="">state</var> to <b title="">hierarchical</b>,
    and rerun this state machine for <var title="">c</var>.
    <!-- XXX hierarchical flag -->

   <dt><b title="">hierarchical</b>
   <dd>
    <p>Let <var title="">base</var> be
    <a href="#concept-url-base" title="concept-url-base">base URL</a>, then, based on
    <var title="">c</var>:
    <dl class="switch">
     <dt><a href="#eof-code-point">EOF code point</a>
     <dd>
      <p>Set <a href="#concept-url-scheme" title="concept-url-scheme">scheme</a> to
      <var title="">base</var>'s <a href="#concept-url-scheme" title="concept-url-scheme">scheme</a>,
      <a href="#concept-url-host" title="concept-url-host">host</a> to
      <var title="">base</var>'s <a href="#concept-url-host" title="concept-url-host">host</a>,
      <a href="#concept-url-port" title="concept-url-port">port</a> to
      <var title="">base</var>'s <a href="#concept-url-port" title="concept-url-port">port</a>,
      <a href="#concept-url-path" title="concept-url-path">path</a> to
      <var title="">base</var>'s <a href="#concept-url-path" title="concept-url-path">path</a>,
      <a href="#concept-url-query" title="concept-url-query">query</a> to
      <var title="">base</var>'s <a href="#concept-url-query" title="concept-url-query">query</a>,
      and then terminate these steps.

     <dt>"<code title="">/</code>"
     <dt>"<code title="">\</code>"
     <dd>
      <p>If the code point in <var title="">input</var> after
      <var title="">c</var> is either "<code title="">/</code>" or
      "<code title="">\</code>", set
      <a href="#concept-url-scheme" title="concept-url-scheme">scheme</a> to
      <var title="">base</var>'s <a href="#concept-url-scheme" title="concept-url-scheme">scheme</a>,
      and <var title="">state</var> to <b title="">authority start</b>.

      <p>Otherwise, set
      <a href="#concept-url-scheme" title="concept-url-scheme">scheme</a> to
      <var title="">base</var>'s <a href="#concept-url-scheme" title="concept-url-scheme">scheme</a>,
      <a href="#concept-url-host" title="concept-url-host">host</a> to
      <var title="">base</var>'s <a href="#concept-url-host" title="concept-url-host">host</a>,
      <a href="#concept-url-port" title="concept-url-port">port</a> to
      <var title="">base</var>'s <a href="#concept-url-port" title="concept-url-port">port</a>,
      <var title="">state</var> to <b title="">hierarchical path start</b>,
      and rerun this state machine for <var title="">c</var>.

     <dt>"<code title="">?</code>"
     <dd><p>Set <a href="#concept-url-scheme" title="concept-url-scheme">scheme</a> to
     <var title="">base</var>'s <a href="#concept-url-scheme" title="concept-url-scheme">scheme</a>,
     <a href="#concept-url-host" title="concept-url-host">host</a> to
     <var title="">base</var>'s <a href="#concept-url-host" title="concept-url-host">host</a>,
     <a href="#concept-url-port" title="concept-url-port">port</a> to
     <var title="">base</var>'s <a href="#concept-url-port" title="concept-url-port">port</a>,
     <a href="#concept-url-path" title="concept-url-path">path</a> to
     <var title="">base</var>'s <a href="#concept-url-path" title="concept-url-path">path</a>,
     <a href="#concept-url-query" title="concept-url-query">query</a> to "<code title="">?</code>",
     and <var title="">state</var> to <b title="">query</b>.

     <dt>"<code title="">#</code>"
     <dd><p>Set <a href="#concept-url-scheme" title="concept-url-scheme">scheme</a> to
     <var title="">base</var>'s <a href="#concept-url-scheme" title="concept-url-scheme">scheme</a>,
     <a href="#concept-url-host" title="concept-url-host">host</a> to
     <var title="">base</var>'s <a href="#concept-url-host" title="concept-url-host">host</a>,
     <a href="#concept-url-port" title="concept-url-port">port</a> to
     <var title="">base</var>'s <a href="#concept-url-port" title="concept-url-port">port</a>,
     <a href="#concept-url-path" title="concept-url-path">path</a> to
     <var title="">base</var>'s <a href="#concept-url-path" title="concept-url-path">path</a>,
     <a href="#concept-url-query" title="concept-url-query">query</a> to
     <var title="">base</var>'s <a href="#concept-url-query" title="concept-url-query">query</a>,
     <a href="#concept-url-fragment" title="concept-url-fragment">fragment</a> to
     "<code title="">#</code>", and <var title="">state</var> to
     <b title="">fragment</b>.

     <dt>Otherwise
     <dd><p>Set <a href="#concept-url-scheme" title="concept-url-scheme">scheme</a> to
     <var title="">base</var>'s <a href="#concept-url-scheme" title="concept-url-scheme">scheme</a>,
     <a href="#concept-url-host" title="concept-url-host">host</a> to
     <var title="">base</var>'s <a href="#concept-url-host" title="concept-url-host">host</a>,
     <a href="#concept-url-port" title="concept-url-port">port</a> to
     <var title="">base</var>'s <a href="#concept-url-port" title="concept-url-port">port</a>,
     <a href="#concept-url-path" title="concept-url-path">path</a> to
     <var title="">base</var>'s <a href="#concept-url-path" title="concept-url-path">path</a>, then
     remove <a href="#concept-url-path" title="concept-url-path">path</a>'s last string, set
     <var title="">state</var> to <b title="">hierarchical path start</b>,
     and rerun this state machine for <var title="">c</var>.
    </dl>

   <dt><b title="">authority start</b>
   <dd><p>If <var title="">c</var> is neither "<code title="">/</code>" nor
   "<code title="">\</code>", set <var title="">state</var> to
   <b title="">authority</b>, and rerun this state machine for
   <var title="">c</var>.

   <dt><b title="">authority</b>
   <dd>
    <p>Based on <var title="">c</var>:
    <dl class="switch">
     <dt>"<code title="">@</code>"
     <dd>
      <ol>
       <li><p>If <var title="">@ flag</var> is set, append
       "<code title="">%40</code>" to
       <a href="#concept-url-userinfo" title="concept-url-userinfo">userinfo</a>.

       <li><p>Set the <var title="">@ flag</var>.

       <li><p>Append each code point in <var title="">buffer</var>,
       <span>percent escaped</span>, to
       <a href="#concept-url-userinfo" title="concept-url-userinfo">userinfo</a>

       <li><p>Set <var title="">buffer</var> to the empty string.
      </ol>
     <dt><a href="#eof-code-point">EOF code point</a>
     <dt>"<code title="">/</code>"
     <dt>"<code title="">\</code>"
     <dt>"<code title="">?</code>"
     <dt>"<code title="">#</code>"
     <dd><p>Rerun this state machine for all code points in
     <var title="">buffer</var>, set <var title="">buffer</var> to the empty
     string, and <var title="">state</var> to <b title="">host</b>.

     <dt>Otherwise
     <dd><p>Append <var title="">c</var> to <var title="">buffer</var>.
    </dl>

   <dt><b title="">host</b>
   <dt><b title="">hostname</b>
   <dd>
    <ol>
     <li><p>If <var title="">c</var> is "<code title="">:</code>" and
     <var title="">[] flag</var> is unset, set
     <a href="#concept-url-host" title="concept-url-host">host</a> to <var title="">buffer</var>,
     <!-- XXX host normalize -->
     <var title="">buffer</var> to the empty string, <var title="">state</var>
     to <b title="">port</b>, and then only if <var title="">override</var> is
     <b title="">hostname</b>, terminate these steps.

     <li><p>Otherwise, if <var title="">c</var> is one of
     <a href="#eof-code-point">EOF code point</a>, "<code title="">/</code>",
     "<code title="">\</code>", "<code title="">?</code>", or
     "<code title="">#</code>", set
     <a href="#concept-url-host" title="concept-url-host">host</a> to <var title="">buffer</var>,
     <!-- XXX host normalize -->
     <var title="">buffer</var> to the empty string, <var title="">state</var>
     to <b title="">hierarchical path start</b>, and then only if
     <var title="">override</var> is given, terminate these steps, or otherwise
     rerun this state machine for <var title="">c</var>.

     <li>
      <p>Otherwise, if <var title="">c</var> is none of U+0009, U+000A, and
      U+000D, run these substeps:

      <ol>
       <li><p>If <var title="">c</var> is "<code title="">[</code>", set the
       <var title="">[] flag</var>.

       <li><p>If <var title="">c</var> is "<code title="">]</code>", unset the
       <var title="">[] flag</var>.

       <li><p>Append <var title="">c</var> to <var title="">buffer</var>.
      </ol>
    </ol>

   <dt><b title="">port</b>
   <dd>
    <ol>
     <li><p>If <var title="">c</var> is in the range U+0030 through to U+0039,
     append <var title="">c</var> to <var title="">buffer</var>.

     <li>
      <p>Otherwise, if <var title="">c</var> is one of
      <a href="#eof-code-point">EOF code point</a>, "<code title="">/</code>",
      "<code title="">\</code>", "<code title="">?</code>", or
      "<code title="">#</code>", or <var title="">override</var> is given, run
      these substeps:
      <ol>
       <li><p class="XXX">parse buffer and set port

       <li><p>If <var title="">override</var> is given, terminate this
       algorithm.

       <li><p>Set <var title="">buffer</var> to the empty string,
       <var title="">state</var> to <b title="">hierarchical path start</b>, and
       rerun this state machine for <var title="">c</var>.
      </ol>

     <li><p>Otherwise, <span>mark invalid</span>.
    </ol>

   <dt><b title="">path</b>
   <dd>
    <ol>
     <li><p>Append an empty string to
     <a href="#concept-url-path" title="concept-url-path">path</a>.

     <li><p>If <var title="">override</var> is not given and <var title="">c</var>
     is "<code title="">#</code>", set <var title="">state</var> to
     <b title="">fragment</b>.

     <li><p>Otherwise, if <var title="">c</var> is not the
     <a href="#eof-code-point">EOF code point</a>, append <var title="">c</var>,
     <span>percent escaped</span>, to the only string in
     <a href="#concept-url-path" title="concept-url-path">path</a>.
    </ol>

   <dt><b title="">hierarchical path start</b>
   <dd><p>Set <var title="">state</var> to <b title="">hierarchical path</b> and
   if <var title="">c</var> is neither "<code title="">/</code>" nor
   "<code title="">\</code>", rerun this state machine for <var title="">c</var>.

   <dt><b title="">hierarchical path</b>
   <dd>
    <ol>
     <li>
      <p>If either <var title="">c</var> is one of
      <a href="#eof-code-point">EOF code point</a>, "<code title="">/</code>", and
      "<code title="">\</code>", or <var title="">override</var> is not given and
      <var title="">c</var> is "<code title="">?</code>" or
      "<code title="">#</code>", run these substeps:
      <ol>
       <li><p>If <var title="">buffer</var> is "<code title="">..</code>" and
       <var title="">c</var> is one of <a href="#eof-code-point">EOF code point</a>,
       "<code title="">/</code>", and "<code title="">\</code>", set the last
       string in <a href="#concept-url-path" title="concept-url-path">path</a> to the empty
       string.

       <li><p>Otherwise, if <var title="">buffer</var> is
       "<code title="">..</code>", remove the last string from
       <a href="#concept-url-path" title="concept-url-path">path</a>.

       <li><p>Otherwise, if <var title="">buffer</var> is
       "<code title="">.</code>" and <var title="">c</var> is one of
       <a href="#eof-code-point">EOF code point</a>, "<code title="">/</code>", and
       "<code title="">\</code>", append an empty string to
       <a href="#concept-url-path" title="concept-url-path">path</a>.

       <li><p>Otherwise, if <var title="">buffer</var> is not
       "<code title="">.</code>", append <var title="">buffer</var> to
       <a href="#concept-url-path" title="concept-url-path">path</a>.

       <li><p>Set <var title="">buffer</var> to the empty string.

       <li><p>If <var title="">c</var> is "<code title="">?</code>", set
       <a href="#concept-url-query" title="concept-url-query">query</a> to "<code title="">?</code>",
       and <var title="">state</var> to <b title="">query</b>.

       <li><p>If <var title="">c</var> is "<code title="">#</code>", set
       <a href="#concept-url-fragment" title="concept-url-fragment">fragment</a> to
       "<code title="">#</code>", and <var title="">state</var> to
       <b title="">fragment</b>.
      </ol>

     <li><p>Otherwise, if <var title="">c</var> is none of U+0009, U+000A, and
     U+000D, append <var title="">c</var>, <span>percent escaped</span>, to
     <var title="">buffer</var>.
    </ol>

   <dt><b title="">query</b>
   <dd>
    <ol>
     <li><p>If <var title="">override</var> is not given and <var title="">c</var>
     is "<code title="">#</code>", set
     <a href="#concept-url-fragment" title="concept-url-fragment">fragment</a> to
     "<code title="">#</code>", and state to <b title="">fragment</b>.

     <li><p>Otherwise, if <var title="">c</var> is none of U+0009, U+000A, and
     U+000D, append <var title="">c</var>, <span>percent escaped</span>, to
     <a href="#concept-url-query" title="concept-url-query">query</a>.
    </ol>

   <dt><b title="">fragment</b>
   <dd><p>If <var title="">c</var> is none of U+0009, U+000A, and U+000D,
   append <var title="">c</var>, <span>percent escaped</span>, to
   <a href="#concept-url-fragment" title="concept-url-fragment">fragment</a>.
  </dl>
</ol>



<h3 id="api"><span class="secno">4.3 </span>API</h3>

<pre class="idl">[<a href="#dom-url" title="dom-URL">Constructor</a>(DOMString <var title="">url</var>, optional (<a href="#url">URL</a> or DOMString)? <var title="">base</var> = null)]
interface <dfn id="url">URL</dfn> {

};
<a href="#url">URL</a> implements <a href="#urlutils">URLUtils</a>;

[NoInterfaceObject]
interface <dfn id="urlutils">URLUtils</dfn> {
  stringifier attribute DOMString <a href="#dom-url-href" title="dom-URL-href">href</a>;
  readonly attribute DOMString <span title="dom-URL-origin">origin</span>;

           attribute DOMString <a href="#dom-url-protocol" title="dom-URL-protocol">protocol</a>;
           attribute DOMString <a href="#dom-url-host" title="dom-URL-host">host</a>;
           attribute DOMString <a href="#dom-url-hostname" title="dom-URL-hostname">hostname</a>;
           attribute DOMString <a href="#dom-url-port" title="dom-URL-port">port</a>;
           attribute DOMString <span title="dom-URL-pathname">pathname</span>;
           attribute DOMString <a href="#dom-url-search" title="dom-URL-search">search</a>;
           attribute DOMString <a href="#dom-url-hash" title="dom-URL-hash">hash</a>;
}</pre>

<p>Any object implementing <a href="#urlutils"><code>URLUtils</code></a> represents a
<a href="#concept-url" title="concept-url">URL</a>. Thus <a href="#url"><code>URL</code></a> represents a
<a href="#concept-url" title="concept-url">URL</a>.

<p class="note">The <a href="#url"><code>URL</code></a> object and
<a href="#concept-url" title="concept-url">URL</a> share the same name because nothing else
makes much sense and when it comes down to it almost nobody cares.


<h4 id="constructor"><span class="secno">4.3.1 </span>Constructor</h4>

<p>The
<dfn id="dom-url" title="dom-URL"><code>URL(<var title="">url</var> [, <var title="">base</var>])</code></dfn>
constructor must run these steps:

<ol>
 <li><p>If <var title="">base</var> is a string,
 <a href="#concept-url-create" title="concept-url-create">create</a> a
 <a href="#concept-url" title="concept-url">URL</a> from <var title="">base</var> and set
 <var title="">base</var> to the result of that algorithm.

 <li><p>If <var title="">base</var> is not null and its
 <a href="#invalid-flag">invalid flag</a> is set, throw a
 "<a href="http://dom.spec.whatwg.org/#invalidstateerror"><code class="external" data-anolis-spec="dom">InvalidStateError</code></a>".

 <li><p><a href="#concept-url-create" title="concept-url-create">Create</a> a
 <a href="#concept-url" title="concept-url">URL</a> from <var title="">url</var> with
 <var title="">base</var> as <i title="">base</i>, associate it with a new
 <a href="#url"><code>URL</code></a> object, and then return that <a href="#url"><code>URL</code></a> object.
</ol>


<h4 id="urlutils-members"><span class="secno">4.3.2 </span><a href="#urlutils"><code>URLUtils</code></a> members</h4>

<p>The <dfn id="dom-url-href" title="dom-URL-href"><code>href</code></dfn> attribute must run
these steps:

<ol>
 <li><p>If the <a href="#invalid-flag">invalid flag</a> is set, return
 <a href="#concept-url-input" title="concept-url-input">input</a>.

 <li><p>Let <var title="">output</var> be
 <a href="#concept-url-scheme" title="concept-url-scheme">scheme</a> and "<code title="">:</code>"
 concatenated.

 <li>
  <p>If the <a href="#hierarchical-flag">hierarchical flag</a> is set:

  <ol>
   <li><p>Append "<code title="">//</code>" to <var title="">output</var>.

   <li><p>If <a href="#concept-url-userinfo" title="concept-url-userinfo">userinfo</a> is not the
   empty string, append <a href="#concept-url-userinfo" title="concept-url-userinfo">userinfo</a> and
   "<code title="">@</code>" concatenated to <var title="">output</var>.

   <li><p>Append <a href="#concept-url-host" title="concept-url-host">host</a> to
   <var title="">output</var>.

   <li><p>If <a href="#concept-url-port" title="concept-url-port">port</a> is not
   the empty string, append "<code title="">:</code>" and
   <a href="#concept-url-port" title="concept-url-port">port</a> concatenated to
   <var title="">output</var>.
  </ol>

 <li><p class="XXX">path

 <li><p>Append <a href="#concept-url-query" title="concept-url-query">query</a> and
 <a href="#concept-url-fragment" title="concept-url-fragment">fragment</a> concatenated to
 <var title="">output</var>, and then return <var title="">output</var>.
</ol>

<p>Setting the <a href="#dom-url-href"><code title="dom-URL-href">href</code></a> attribute must
run these steps:

<ol>
 <li><p class="XXX">clear

 <li><p><a href="#concept-url-parse" title="concept-url-parse">Parse</a> with the given value as
 <i title="">input</i>
</ol>

<p class="XXX">origin

<p>The <dfn id="dom-url-protocol" title="dom-URL-protocol"><code>protocol</code></dfn> attribute
must return <a href="#concept-url-scheme" title="concept-url-scheme">scheme</a> and
"<code title="">:</code>" concatenated.

<p class="note">In case the <a href="#invalid-flag">invalid flag</a> is set this will cause
it to return "<code title="">:</code>".

<p>Setting the <a href="#dom-url-protocol"><code title="dom-URL-protocol">protocol</code></a> attribute must
run these steps:

<ol>
 <li><p>If the <a href="#invalid-flag">invalid flag</a> is set, terminate these steps.

 <li><p><a href="#concept-url-parse" title="concept-url-parse">Parse</a> with the given value and
 "<code title="">:</code>" concatenated as <i title="">input</i> and
 <b title="">scheme start</b> as <i title="">override</i>.
</ol>

<p>The <dfn id="dom-url-host" title="dom-URL-host"><code>host</code></dfn> attribute must run
these steps:

<ol>
 <li><p>If the <a href="#invalid-flag">invalid flag</a> is set, return the empty string.

 <li><p>If <a href="#concept-url-port" title="concept-url-port">port</a> is the empty string,
 return <a href="#concept-url-host" title="concept-url-host">host</a>.

 <li><p>Return <a href="#concept-url-host" title="concept-url-host">host</a>,
 "<code title="">:</code>", and <a href="#concept-url-port" title="concept-url-port">port</a>
 concatenated.
</ol>

<p>Setting the <a href="#dom-url-host"><code title="dom-URL-host">host</code></a> attribute must run these
steps:

<ol>
 <li><p>If the <a href="#invalid-flag">invalid flag</a> is set, or the
 <a href="#hierarchical-flag">hierarchical flag</a> is not set, terminate these steps.

 <li><p><a href="#concept-url-parse" title="concept-url-parse">Parse</a> with the given value as
 <i title="">input</i> and <b title="">host</b> as <i title="">override</i>.
</ol>

<p>The <dfn id="dom-url-hostname" title="dom-URL-hostname"><code>hostname</code></dfn> attribute
must return <a href="#concept-url-host" title="concept-url-host">host</a>.

<p>Setting the <a href="#dom-url-hostname"><code title="dom-URL-hostname">hostname</code></a> attribute must
run these steps:

<ol>
 <li><p>If the <a href="#invalid-flag">invalid flag</a> is set, or the
 <a href="#hierarchical-flag">hierarchical flag</a> is not set, terminate these steps.

 <li><p><a href="#concept-url-parse" title="concept-url-parse">Parse</a> with the given value as
 <i title="">input</i> and <b title="">hostname</b> as <i title="">override</i>.
</ol>

<p>The <dfn id="dom-url-port" title="dom-URL-port"><code>port</code></dfn> attribute must return
<a href="#concept-url-port" title="concept-url-port">port</a>.

<p>Setting the <a href="#dom-url-port"><code title="dom-URL-port">port</code></a> attribute must run these
steps:

<ol>
 <li><p>If the <a href="#invalid-flag">invalid flag</a> is set, or the
 <a href="#hierarchical-flag">hierarchical flag</a> is not set, terminate these steps.

 <li><p><a href="#concept-url-parse" title="concept-url-parse">Parse</a> with the given value as
 <i title="">input</i> and <b title="">port</b> as <i title="">override</i>.
</ol>

<p class="XXX">pathname

<p>The <dfn id="dom-url-search" title="dom-URL-search"><code>search</code></dfn> attribute must
run these steps:

<ol>
 <li><p>If the <a href="#invalid-flag">invalid flag</a> is set, or
 <a href="#concept-url-query" title="concept-url-query">query</a> is either the empty string or
 "<code title="">?</code>", return the empty string.

 <li><p>Return <a href="#concept-url-query" title="concept-url-query">query</a>.
</ol>

<p>Setting the <a href="#dom-url-search"><code title="dom-URL-search">search</code></a> attribute must run
these steps:

<ol>
 <li><p>If the <a href="#invalid-flag">invalid flag</a> is set, or the
 <a href="#hierarchical-flag">hierarchical flag</a> is not set, terminate these steps.

 <li><p>Let <var title="">input</var> be the given value with a single leading
 "<code title="">?</code>" removed, if any.

 <li><p><a href="#concept-url-parse" title="concept-url-parse">Parse</a> with
 <var title="">input</var> as <i title="">input</i> and <b title="">query</b> as
 <i title="">override</i>.
</ol>

<p>The <dfn id="dom-url-hash" title="dom-URL-hash"><code>hash</code></dfn> attribute must run
these steps:

<ol>
 <li><p>If the <a href="#invalid-flag">invalid flag</a> is set, or
 <a href="#concept-url-fragment" title="concept-url-fragment">fragment</a> is either the empty string
 or "<code title="">#</code>", return the empty string.

 <li><p>Return <a href="#concept-url-fragment" title="concept-url-fragment">fragment</a>.
</ol>

<p>Setting the <a href="#dom-url-hash"><code title="dom-URL-hash">hash</code></a> attribute must run these
steps:

<ol>
 <li><p>If the <a href="#invalid-flag">invalid flag</a> is set, or the
 <a href="#hierarchical-flag">hierarchical flag</a> is not set, terminate these steps.

 <li><p>Let <var title="">input</var> be the given value with a single leading
 "<code title="">#</code>" removed, if any.

 <li><p><a href="#concept-url-parse" title="concept-url-parse">Parse</a> with
 <var title="">input</var> as <i title="">input</i> and <b title="">fragment</b> as
 <i title="">override</i>.
</ol>



<h2 class="no-num" id="references">References</h2>
<div id="anolis-references"><dl><dt id="refsRFC2119">[RFC2119]
<dd><cite><a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a></cite>, Scott Bradner. IETF.

</dl></div>



<h2 class="no-num" id="acknowledgments">Acknowledgments</h2>

<p>Thanks to Simon Pieters for being awesome!



<script id="head" src="http://www.whatwg.org/specs/web-apps/current-work/dfn.js"></script>
